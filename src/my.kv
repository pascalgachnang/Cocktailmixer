#:kivy 1.0
#:import Factory kivy.factory.Factory


# Styles:

<PumpBoxLayout@BoxLayout>:
    orientation: 'vertical'
    padding: 20 
    canvas:
        Color:
            rgba: 255, 255, 255, 0.1
        Rectangle:
            size: self.size
            pos: self.pos

<PumpButton@Button>:
    font_size: '25sp'

<PumpLabel@Label>:
    font_size: '25sp'

<PumpImage@Image>:
    size: self.texture_size



#Windows

WindowManager:
    PositioningWindow:
    MainWindow1:
    MainWindow2:
    MainWindow3:
    MainWindow4:
    DrinkInProgress:


<PositioningWindow>:
    name: "positioning"

    
    GridLayout:
        cols: 1
        padding: 20

        Label:
            id: positioning_label
            text: "Start Positioning"
            font_size: 50
            size_hint_y: 0.8

        Button:
            text: "Start"
            font_size: 50
            size_hint: 0.6, 0.4
            pos_hint: {'center_x': 0.5}
            background_color: 0, 0.7, 0.7, 1  # Hintergrundfarbe des Buttons
            on_release: 
                app.calling_reference_run()
                Factory.P_PositioningComplete().open()

#Popups Positioning

<P_Positioning@Popup>: #Popup Positioning
    auto_dismiss: False
    title: "positioning..."
    Label:
        text: "positioning..."
        size_hint: 0.6, 0.2
        pos_hint: {"x":0.2, "top":1}

<P_PositioningComplete@Popup>: #Popup Positioning Complete
    auto_dismiss: False
    title: "Positioning complete"
    font_size: 50
    
    Button:
        text: "start mixing"
        font_size: 50
        size_hint: 0.8, 0.2
        pos_hint:  {"x":0.1, "y":0.1}
        on_release:
            root.dismiss()
            app.root.current = "page one" 
            
<P_StartMixing@Popup>:
    auto_dismiss: False
    size_hint: 0.8, 0.5
    title: "Did you choose the right drink?"

    BoxLayout:
        orientation: 'vertical'

        # Titel und Zutaten oben im Popup
        

        GridLayout:
            cols: 2
            
            Label:
                id: ingredients_label  # ID, damit es im Python-Code referenziert werden kann
                markup: True
                text: "No ingredients selected"  # Standardtext, wird später geändert
                font_size: 25
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'left'  # Links ausgerichtet
                valign: 'top'  # Oben bündig
                text_size: self.width, None  # Setze nur die Breite, Höhe passt sich an
                size_hint_y: None

            Label:
                id: garnish_label  # ID, damit es im Python-Code referenziert werden kann
                markup: True
                text: "No garnish selected"  # Standardtext, wird später geändert
                font_size: 25
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'left'  # Links ausgerichtet
                valign: 'top'  # Oben bündig
                text_size: self.width, None  # Setze nur die Breite, Höhe passt sich an
                size_hint_y: None

        # Buttons unten im Popup, über die gesamte Breite
        GridLayout:
            cols: 2
            size_hint_y: None
            height: 200  # Feste Höhe der Buttons
            spacing: 10  # Abstand zwischen den Buttons

            Button:
                id: btnYes
                text: "start mixing"
                font_size: 50
                background_color: 0, 1, 0, 1  # Grün (RGBA)
                on_press: 
                    app.AddOrder()
                on_release: root.dismiss()

            Button:
                text: "choose another drink"
                font_size: 50
                background_color: 1, 0, 0, 1  # Rot (RGBA)
                on_press:
                    root.dismiss()
                on_release: 
                    root.dismiss()
                    
    
        
<MainWindow1>:
    name: "page one"

    BoxLayout:
        orientation: 'vertical'

        GridLayout:
            cols: 4
            spacing: 10
            padding: 10

            Button:
                text: 'Wodka Martini'
                font_size: 50
                background_normal: 'src/ressources/Wodka_Martini.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 
                    
                
            Button:
                text: 'Wodka Soda'
                font_size: 50
                background_normal: 'src/ressources/Wodka_Soda.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Wodka Cola'
                font_size: 50
                background_normal: 'src/ressources/Wodka_Cola.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Kamikaze'
                font_size: 50
                background_normal: 'src/ressources/Kamikaze.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Metropolitan'
                font_size: 50
                background_normal: 'src/ressources/Metropolitan.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Screwdriver'
                font_size: 50
                background_normal: 'src/ressources/Screwdriver.JPG'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Tequila Sunrise'
                font_size: 50
                background_normal: 'src/ressources/Tequila_Sunrise.JPG'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Wodka Sour'
                font_size: 50
                background_normal: 'src/ressources/Wodka_Sour.JPG'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Wodka Ricky'
                font_size: 50
                background_normal: 'src/ressources/Wodka_Ricky.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Cosmopolitan'
                font_size: 50
                background_normal: 'src/ressources/Cosmopolitan.JPG'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Vesper'
                font_size: 50
                background_normal: 'src/ressources/Vesper.JPG'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Long Island Iced Tea'
                font_size: 50
                background_normal: 'src/ressources/Long_Island_Iced_Tea.JPG'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Martini'
                font_size: 50
                background_normal: 'src/ressources/Martini.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Gin Fizz'
                font_size: 50
                background_normal: 'src/ressources/Gin_Fizz.jpeg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 


            Button:
                text: 'Wodka Sunrise'
                font_size: 50
                background_normal: 'src/ressources/Wodka_Sunrise.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                markup: True  
                background_normal: 'src/ressources/Pfeil_Weiter.jpg'

                on_press: 
                    root.manager.transition.direction = 'left'
                    app.root.current = "page two"
                               

<MainWindow2>:
    name: "page two"
    
    BoxLayout:
        orientation: 'vertical'

        GridLayout:
            cols: 4
            spacing: 10
            padding: 10

            Button:
                text: 'Perfect Martini'
                font_size: 50
                background_normal: 'src/ressources/Perfect_Martini.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 
                    
            Button:
                text: 'Bronx'
                font_size: 50
                background_normal: 'src/ressources/Bronx.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Orange Blossom'
                font_size: 50
                background_normal: 'src/ressources/Orange_Blossom.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Tom Collins'
                font_size: 50
                background_normal: 'src/ressources/Tom_Collins.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Cucumber Gin Cooler'
                font_size: 50
                background_normal: 'src/ressources/Cucumber_Gin_Cooler.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Raspberry Gin Lemonade'
                font_size: 42
                background_normal: 'src/ressources/Raspberry_Gin_Lemonade.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Gin Basil Smash'
                font_size: 50
                background_normal: 'src/ressources/Gin_Basil_Smash.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Sweet Martini'
                font_size: 50
                background_normal: 'src/ressources/Sweet_Martini.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Daiquiri'
                font_size: 50
                background_normal: 'src/ressources/Daiquiri.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Mojito'
                font_size: 50
                background_normal: 'src/ressources/Mojito.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Rum Cola'
                font_size: 50
                background_normal: 'src/ressources/Rum_Cola.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Cuba Libre'
                font_size: 50
                background_normal: 'src/ressources/Cuba_Libre.jpeg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 


            Button:
                markup: True  
                background_normal: 'src/ressources/Pfeil_Zurück.jpg'

                on_press: 
                    root.manager.transition.direction = 'right'
                    app.root.current = "page one"

            Button:
                text: 'Mai Tai'
                font_size: 50
                background_normal: 'src/ressources/Mai_Tai.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 


            Button:
                text: 'Rum Soda'
                font_size: 50
                background_normal: 'src/ressources/Rum_Soda.jpg'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                markup: True  
                background_normal: 'src/ressources/Pfeil_Weiter.jpg'

                on_press: 
                    root.manager.transition.direction = 'left'
                    app.root.current = "page three"   
           
<MainWindow3>:
    name: "page three"
    
    BoxLayout:
        orientation: 'vertical'


        GridLayout:
            cols: 4
            spacing: 10
            padding: 10

            Button:
                text: 'Manhattan'
                font_size: 50
                background_normal: 'src/ressources/Manhattan.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 
                    
            Button:
                text: 'Rob Roy'
                font_size: 50
                background_normal: 'src/ressources/RobRoy.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Sidecar'
                font_size: 50
                background_normal: 'src/ressources/Sidecar.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Brandy Sour'
                font_size: 50
                background_normal: 'src/ressources/BrandySour.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Brandy Daisy'
                font_size: 50
                background_normal: 'src/ressources/BrandyDaisy.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Wermut Soda'
                font_size: 50
                background_normal: 'src/ressources/WermutSoda.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Whiskey Cola'
                font_size: 50
                background_normal: 'src/ressources/WhiskeyCola.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'White Vermouth Spritz'
                font_size: 42
                background_normal: 'src/ressources/WhiteVermouthSpritz.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Triple Sec Citrus Cooler'
                font_size: 42
                background_normal: 'src/ressources/TripleSecCitrusCooler.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Bourbon Cola Twist'
                font_size: 50
                background_normal: 'src/ressources/BourbonColaTwist.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Margarita'
                font_size: 50
                background_normal: 'src/ressources/Margarita.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                text: 'Old Fashioned'
                font_size: 50
                background_normal: 'src/ressources/OldFashioned.png'

                on_press:  
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 
                

            Button:
                markup: True  
                background_normal: 'src/ressources/Pfeil_Zurück.jpg'

                on_press: 
                    root.manager.transition.direction = 'right'
                    app.root.current = "page two"


            Button:
                text: 'Mint Julep'
                font_size: 50
                background_normal: 'src/ressources/MintJulep.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 


            Button:
                text: 'Bourbon Cola'
                font_size: 50
                background_normal: 'src/ressources/BourbonCola.png'

                on_press: 
                    app.IncomingDrinkOrder(self)
                    app.update_ingredients_label() 

            Button:
                markup: True  
                background_normal: 'src/ressources/Pfeil_Weiter.jpg'

                on_press: 
                    root.manager.transition.direction = 'left'
                    app.root.current = "page four" 



    
<MainWindow4>:
    name: "page four"
    
    
    GridLayout:
        cols: 1
        spacing: 10
        padding: 10

        BoxLayout:
            orientation: 'vertical'

            BoxLayout:
                orientation: 'horizontal'

                Label:
                    text: "Manual operation"
                    font_size: 50
                    valign: 'top'
              

            

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 3.5

                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 1'
                        background_normal: 'src/ressources/WermutWeiss.png'
                        color: 0, 0, 0, 0
                        on_press: app.IncomingDrinkOrder(self)
                        
                    Label:
                        id: 'WermutWeiss'
                        text: 'Wermut\nweiss'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle' 
                        size_hint_y: 0.4  
                
                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 2'
                        color: 0, 0, 0, 0
                        background_normal: 'src/ressources/Brandy.png'
                        on_press: app.IncomingDrinkOrder(self)

                    Label:
                        id: 'Brandy'
                        text: 'Brandy'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: 0.4

                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 3'
                        color: 0, 0, 0, 0
                        background_normal: 'src/ressources/Orangenlikör.png'
                        on_press: app.IncomingDrinkOrder(self)

                    Label:
                        id: 'Orangenlikör'
                        text: 'Orangen-\nlikör'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: 0.4

                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 4'
                        color: 0, 0, 0, 0
                        background_normal: 'src/ressources/WermutRot.png'
                        on_press: app.IncomingDrinkOrder(self)

                    Label:
                        id: 'WermutRot'
                        text: 'Wermut\nrot'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: 0.4

                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 5'
                        color: 0, 0, 0, 0
                        background_normal: 'src/ressources/BourbonWhiskey.png'                       
                        on_press: app.IncomingDrinkOrder(self)

                    Label:
                        id: 'BourbonWhiskey'
                        text: 'Bourbon\nWhiskey'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: 0.4

                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 6'
                        color: 0, 0, 0, 0
                        background_normal: 'src/ressources/Tequila.png'                        
                        on_press: app.IncomingDrinkOrder(self)

                    Label:
                        id: 'Tequila'
                        text: 'Tequila'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: 0.4

                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 7'
                        color: 0, 0, 0, 0
                        background_normal: 'src/ressources/RumWeiss.png'                        
                        on_press: app.IncomingDrinkOrder(self)

                    Label:
                        id: 'RumWeiss'
                        text: 'Rum\nweiss'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: 0.4

                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 8'
                        color: 0, 0, 0, 0
                        background_normal: 'src/ressources/Gin.png'                        
                        on_press: app.IncomingDrinkOrder(self)

                    Label:
                        id: 'Gin'
                        text: 'Gin'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: 0.4

                BoxLayout:
                    orientation: 'vertical'

                    Button:
                        text: 'Test 9'
                        color: 0, 0, 0, 0
                        background_normal: 'src/ressources/Smirnoff.png'                       
                        on_press: app.IncomingDrinkOrder(self)

                    Label:
                        id: 'Smirnoff'
                        text: 'Smirnoff'
                        font_size: 40
                        halign: 'center'
                        valign: 'middle'
                        size_hint_y: 0.4


        

            
        BoxLayout:
            orientation: 'horizontal'
            padding: 20

            #Image:
            #    source: "src/ressources/TheMixingJennyIcon.jpg"
                #size_hint: 1, 1
                #size_hint: .5, .75
            #    pos_hint: {"center_x": .12, 'center_y':.5}

            #Label:
            #    id: output_label
            #    text: "Mixing Jenny, 2024"
            #    font_size: 25
            #    size_hint: 1, 1


            PumpBoxLayout:
                
                Button:
                    background_normal: 'src/ressources/ExitIcon.png'
                    on_release: 
                        app.terminateMixingJenny(self, title="Exit", message="Mixing Jenny verlassen?")
                
                Button:
                    markup: True  
                    background_normal: 'src/ressources/Pfeil_Zurück.jpg'
                    on_press: 
                        root.manager.transition.direction = 'right'
                        app.root.current = "page three"

                # Button:
                #     text: "PopUp"
                #     font_size: 50
                #     on_release: 
                #         app.messageBox(self, title="Test", message="Test")


            PumpBoxLayout:
                PumpImage:
                    source: 'src/ressources/IconPumpe.png'
                PumpLabel:
                    text: 'Press & hold'

                PumpButton:
                    id: 'pumpe_4'
                    text: 'Pumpe 4'

                    on_press: app.runPump(self)
                    on_release: app.stopPump(self)

            PumpBoxLayout:
                PumpImage:
                    source: 'src/ressources/IconPumpe.png'
                PumpLabel:
                    text: 'Press & hold'

                PumpButton:
                    id: 'pumpe_3'
                    text: 'Pumpe 3'

                    on_press: app.runPump(self)
                    on_release: app.stopPump(self)

            PumpBoxLayout:
                PumpImage:
                    source: 'src/ressources/IconPumpe.png'

                PumpLabel:
                    text: 'Press & hold'

                PumpButton:
                    id: 'pumpe_2'
                    text: 'Pumpe 2'

                    on_press: app.runPump(self)
                    on_release: app.stopPump(self)

            PumpBoxLayout:
                PumpImage:
                    source: 'src/ressources/IconPumpe.png'

                PumpLabel:
                    text: 'Press & hold'
                
                PumpButton:
                    id: 'pumpe_1'
                    text: 'Pumpe 1'

                    on_press: app.runPump(self)
                    on_release: app.stopPump(self)
                



            # Button:
            #     id: btnExit
            #     text: "Exit"
            #     on_press: app.stop()




        # AnchorLayout:
            #     anchor_x : 'center'
            #     anchor_y : 'top'
            #     size_hint: .5, .75
            #     pos_hint: {"center_x": 0.75}

                

            #     Button:
            #         markup: True  
            #         background_normal: 'src/ressources/Pfeil_Zurück.jpg'

            #         on_press: 
            #             root.manager.transition.direction = 'right'
            #             app.root.current = "page three"


<DrinkInProgress>:
    name: "drink in progress"

    BoxLayout:
        orientation: 'vertical'
        size: root.width, root.height

        Label:
            id: mixing_drink
            text: "0% Progress"

        ProgressBar:
            id: progress_bar
            min: 0
            max: 100
            value: 0
            pos_hint: {'x':.1}
            size_hint_x: .8

        Button:


            text: "Cancel"
            on_press: 
                app.root.current = "page one" if progress_bar.value < 100 else app.root.current
                

              